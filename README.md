# spacy-text-analysis-toolkit
A collection of Jupyter notebooks demonstrating various text analysis techniques using spaCy, a powerful natural language processing library. The notebooks cover topics such as feature extraction, dependency parsing, and co-occurrence analysis, providing a comprehensive toolkit for text analysis tasks.

このリポジトリは、強力な自然言語処理ライブラリであるspaCyを使用して、様々なテキスト分析手法を実演するJupyterノートブックのコレクションです。特徴抽出、依存構造解析、共起語分析など、テキスト分析タスクのための包括的なツールキットを提供します。

## 環境設定

- `environment-setup.ipynb`: 必要なPythonパッケージをインストールし、分析環境を設定するためのノートブック

## テキスト解析

- `spacy-text-analysis.ipynb`: spaCyを用いた基本的なテキスト解析手法を実演するノートブック
このノートブックでは、spaCyを用いた基本的なテキスト解析手法を実演しています。主な機能は以下の通りです。

1. 指定したディレクトリ内のテキストファイルを読み込み、spaCyの言語モデルを使って解析します。
2. 解析結果はDocオブジェクトとして保存され、他のスクリプトで再利用できます。
3. 解析結果と処理したファイル名は、設定した出力ディレクトリに保存されます。
4. テキストファイルの読み込み時に、改行をスペースに置換しています。これにより、文章の区切りを保ちつつ、一つのテキストとして扱うことができます。
5. 出力ファイル名には、処理が実行された日時が含まれます。これにより、複数回の解析結果を区別できます。

使用方法は、ノートブック内の「ユーザーが編集する設定」セクションで、入力ディレクトリ、使用するモデル、出力ディレクトリ、テキストのエンコーディングを設定し、スクリプトを実行するだけです。

  
- `spacy-text-analysis-colab.ipynb`: Google Colabで実行可能なspaCyテキスト解析のノートブック
このノートブックは、Google Colaboratory環境で動作するように設計されています。spacy-text-analysis.ipynbと同様の機能を提供しますが、以下の点が異なります。

1. マイドライブ上の解析対象テキストファイルとスクリプトを使用します。
2. ノートブック実行前に、マイドライブへのアクセス許可が必要です。
3. 必要なライブラリとモデルを、ノートブック内でインストールします。
4. GPUの使用が可能な場合、spacy.require_gpu()を呼び出してGPUを利用します。
   
Colaboratoryを使うことで、強力なハードウェアを無料で利用でき、環境構築を必要としないメリットがあります。

## 特徴語分析

- `feature-word-analysis.ipynb`: テキストデータから特徴語を抽出し、分析するノートブック
このノートブックでは、テキストデータから特徴語を抽出し、分析する方法を実演しています。主な機能は以下の通りです。

1. N-gram分析
・指定した品詞のN-gramを抽出し、出現頻度を計算します。
・結果は、オリジナルの単語とその基本形（レンマ）の両方で出力されます。
・出力結果に含める品詞、N-gramの最大長、上位N件の頻度、ストップワードなどをユーザーが設定できます。
2. 単語リストの作成
・テキストデータ内の全単語のリストを作成します。
・各単語について、原形、基本形、品詞、出現回数を出力します。
・結果は、単語の原形でソートされ、指定したCSVファイルに保存されます。
3. Scattertext
・2つのグループ間で単語の使用頻度を比較し、散布図で可視化します。
・グループ1とグループ2に含めるテキストファイル名をユーザーが指定します。
・表示する単語数、最小出現頻度、出力結果に含める品詞などをユーザーが設定できます。
・結果は、インタラクティブなHTMLファイルとして出力されます。

これらの機能を使うことで、テキストデータの特徴語を様々な角度から分析できます。N-gram分析では、単語の連なりを検出し、頻出するフレーズを発見できます。単語リストは、テキスト内の語彙を概観するのに役立ちます。Scattertextは、2つのグループ間で特徴的な単語を視覚的に比較できる強力なツールです。

## コンコーダンサー

- `concordancer-simple.ipynb`: シンプルなコンコーダンサーを実装し、キーワードの文脈を分析するノートブック
- `concordancer-matcher.ipynb`: spaCyのMatcherを用いた高度なコンコーダンサーを実装するノートブック


## 依存構造分析

- `dependency-structure-analysis.ipynb`: spaCyを用いて、テキストの依存構造を解析し可視化するノートブック

このノートブックでは、spaCyを用いて、テキストの依存構造を解析し可視化する方法を実演しています。主な機能は以下の通りです。

1. 依存関係マッチャー
・特定の依存関係パターンを定義し、それにマッチする文を抽出します。
・例えば、受動態の主語と動詞の関係など、特定の文法構造を持つ文を検索できます。
・マッチした文は、テキストファイルに出力されます。
2. 依存構造指定の用例抽出
・ユーザーが指定した特徴語（キーワード）について、特定の依存関係を持つ文を抽出します。
・抽出する依存関係のタイプ（直接目的語、前置詞の目的語など）をユーザーが指定できます。
・抽出された文は、特徴語ごとにテキストファイルに出力されます。
3. 依存関係の可視化
・ユーザーが入力した文や、解析済みのデータから特定の文を選択し、その依存構造をグラフィカルに表示します。
・この機能は、依存構造の理解を深めるのに役立ちます。
・可視化には、spaCyのdisplacyモジュールを使用しています。

依存構造分析は、テキストの文法的な関係を理解するのに非常に有用です。特定の依存関係パターンを検索することで、興味深い文法構造を持つ文を発見できます。また、キーワードと依存関係の組み合わせを指定して文を抽出することで、そのキーワードがどのような文脈で使われているかを調べられます。

ノートブック内のコードは、ユーザーが設定を調整しやすいように構成されています。検索パターンや特徴語、依存関係のタイプなどを変更して、様々な観点からテキストの依存構造を分析してみてください。

依存構造の可視化は、分析結果を直感的に理解するのに役立ちます。displacyを使えば、依存構造をインタラクティブなグラフとして表示できます。これにより、テキストの文法的な構造をより深く理解できるでしょう。

## 共起語分析

- `collocation-analysis-simple.ipynb`: シンプルな共起語分析を実行し、単語の共起関係を探るノートブック
- `collocation-analysis-matcher.ipynb`: spaCyのMatcherを用いた高度な共起語分析を実装するノートブック


## 共起ネットワーク

- `co-occurrence-network.ipynb`: 単語の共起関係をネットワーク図で可視化するノートブック
このノートブックでは、単語の共起関係をネットワーク図で可視化する方法を実演しています。主な機能は以下の通りです。

1. テキストデータの前処理
・指定した品詞のみを抽出し、ストップワードを除去します。
・ユーザーが抽出する品詞とストップワードを設定できます。
2. 共起行列の作成
・前処理後のテキストデータから共起行列を生成します。
・出現回数の上限と下限、トークンの最小長をユーザーが指定できます。
3. エッジの重み計算
・共起行列からエッジの重みを計算します。
・共起頻度、Jaccard係数、Dice係数、Simpson係数、PMI（Pointwise Mutual Information）など、様々な重み計算方法を選択できます。
・重みの上限と下限、出力するエッジの数をユーザーが設定できます。
4. 共起ネットワークの作成
・計算したエッジの重みを用いて共起ネットワークを構築します。
・コミュニティ検出アルゴリズムを適用し、単語のコミュニティを識別します。
・ノードとエッジのサイズを調整するための係数をユーザーが指定できます。
5. ネットワークの可視化
・作成した共起ネットワークをインタラクティブなHTML形式で可視化します。
・各ノードには単語、重み、コミュニティ、隣接ノードの情報が表示されます。
・ユーザーはノードをドラッグして配置を変更したり、ズームイン・ズームアウトしたりできます。
6. ネットワーク情報の出力
・共起ネットワークのエッジとノードの情報をCSVファイルに出力します。
・エッジ情報には、単語のペアと重みが含まれます。
・ノード情報には、単語、コミュニティ、出現頻度、次数、重みが含まれます。

共起ネットワークは、テキスト内の単語間の関係性を視覚的に表現するのに非常に有用です。単語の共起パターンを分析することで、テキストのトピックや主要な概念を把握できます。また、コミュニティ検出により、関連の強い単語グループを発見できます。

ノートブック内のコードは、ユーザーが設定を細かく調整できるように設計されています。前処理のパラメータ、重み計算方法、ネットワークのレイアウトなど、様々な側面をカスタマイズし、データに応じて最適な可視化を行えます。

インタラクティブなネットワーク図は、単語間の関係性を直感的に理解するのに役立ちます。ノードをクリックすると、その単語の詳細情報が表示されます。ズームや移動により、ネットワークの全体像と個々の部分を詳しく観察できます。

さらに、ネットワーク情報のCSV出力により、共起関係のデータを他のツールで分析したり、レポートに組み込んだりすることが可能です。



各ノートブックには、使用方法と結果の解釈に関する詳細な説明が含まれています。
このリポジトリを活用して、テキストデータからより深い洞察を引き出すことができるでしょう。
